webpackJsonp([5],{Felb:function(t,e){},WVlp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"moneylog",data:function(){return{queryTime:new Array,result:null,result_view:null,loading:!1,token:sessionStorage.getItem("token"),uid:sessionStorage.getItem("uid"),radio:"payment_all"}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;t.at=null;var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();n>=1&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i);var r=a+"-"+n+"-"+i;t.queryTime||(t.queryTime[0]=r,t.queryTime[1]=r),t.getAxios({token:t.token,uid:t.uid,start_time:t.queryTime[0],end_time:t.queryTime[1],type:t.radio})},getAxios:function(t,e){var a=this;a.loading=!0,e&&(a.at=e),t?(t.token=a.token,t.uid=a.uid):t={token:a.token,uid:a.uid,status_type:a.status_type},a.$axios({method:"post",url:window.$g_Api+"/oa/moneylog1",data:t}).then(function(t){if(a.loading=!1,0==t.data.code){a.result=t.data.data,a.result_view=t.data.data;for(var e=a.result_view.length,n=0;n<e;n++)if("转账成功"==a.result_view[n].status){if(a.result_view[n].name){var i=String(a.result_view[n].name);if(2==i.length){var r=/^.(.)$/;a.result_view[n].name=i.replace(r,"*$1")}else if(3==i.length){r=/^(.).(.)$/;a.result_view[n].name=i.replace(r,"$1*$2")}}if(Number(a.result_view[n].account)&&11===String(a.result_view[n].account).length){var o=String(a.result_view[n].account);r=/^(\d{3})\d{4}(\d{4})$/;a.result_view[n].account=o.replace(r,"$1****$2")}else if(String(a.result_view[n].account).indexOf("@")>0){var s,l=a.result_view[n].account.split("@"),u="";if(l[0].length>4){u=l[0].substr(0,4);for(var _=0;_<l[0].length-4;_++)u+="*"}else{u=l[0].substr(0,1);for(var d=0;d<l[0].length-1;d++)u+="*"}s=u+"@"+l[1],a.result_view[n].account=s}}}else a.$message.error(t.data.message)}).catch(function(t){})},download_log:function(t){this.$axios({method:"post",url:window.$g_Api+"/oa/download_log",data:t})},export2Excel:function(){var t=this,e=this;if(!this.result)return!1;this.download_log({token:e.token,uid:e.uid,start_time:e.queryTime[0],end_time:e.queryTime[1],type:e.radio}),a.e(11).then(function(){var e=a("zWO4").export_json_to_excel,n=t.result;e(["金额","账号","交易状态","姓名","设备信息","交易编号"],t.formatJson(["amount","account","status","name","remark","out_biz_no"],n),"列表excel")}.bind(null,a)).catch(a.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my_wap",attrs:{id:"moneylog"}},[t._m(0),t._v(" "),a("div",{staticClass:"da_header"},[a("div",{staticClass:"header_l"},[a("p",[t._v("查询时间：")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"left","unlink-panels":"",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.queryTime,callback:function(e){t.queryTime=e},expression:"queryTime"}}),t._v(" "),a("el-button",{staticStyle:{margin:"0px 20px"},attrs:{type:"primary"},on:{click:t.getData}},[t._v("点击搜索")]),t._v(" "),[a("el-radio-group",{staticStyle:{"margin-top":"10px !important"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:"payment_all"}},[t._v("全部")]),t._v(" "),a("el-radio",{attrs:{label:"payment_fail"}},[t._v("失败记录")]),t._v(" "),a("el-radio",{attrs:{label:"payment_need_pay"}},[t._v("待补交")])],1)]],2),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.export2Excel}},[t._v("导出excel表格")])],1),t._v(" "),a("div",{staticClass:"logBox"},[t.result_view?a("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"logtable"},[t._m(1),t._v(" "),a("tbody",t._l(t.result_view,function(e,n){return a("tr",{key:n,class:{error:"转账成功"!=e.status,first_pay_status:1!=e.first_pay_status}},[a("td",[t._v(t._s(e.amount))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.status))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.pay_date))]),t._v(" "),a("td",[t._v(t._s(e.remark))]),t._v(" "),a("td",[t._v(t._s(e.out_biz_no))])])}),0)]):a("p",{staticStyle:{width:"100%","text-align":"center"}},[t._v("暂无数据")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"position"},[e("i",{staticClass:"el-icon-location-outline"}),this._v("您现在的位置：数据统计 > 转账记录")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("金额")]),t._v(" "),a("th",[t._v("账号")]),t._v(" "),a("th",[t._v("交易转态")]),t._v(" "),a("th",[t._v("姓名")]),t._v(" "),a("th",[t._v("转账时间")]),t._v(" "),a("th",[t._v("设备信息")]),t._v(" "),a("th",[t._v("交易编号")])])])}]};var r=a("VU/8")(n,i,!1,function(t){a("Felb")},"data-v-3a5ef6f8",null);e.default=r.exports}});