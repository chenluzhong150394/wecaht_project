webpackJsonp([8],{IXwn:function(e,s){},"XP5+":function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t={name:"usercenter",data:function(){var e=this;return{token:sessionStorage.getItem("token"),uid:sessionStorage.getItem("uid"),formLabel:{},ruleForm:{pass:"",checkPass:""},rules:{pass:[{validator:function(s,a,t){""===a?t(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),t())},trigger:"blur"}],checkPass:[{validator:function(s,a,t){""===a?t(new Error("请再次输入密码")):a!==e.ruleForm.pass?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]},show:!1,loading:!1}},mounted:function(){var e=this;e.$axios({method:"post",url:window.$g_Api+"/oa/manage/get_userinfo",data:{token:e.token,uid:e.uid}}).then(function(s){e.formLabel=s.data.data}).catch(function(e){})},methods:{showBox:function(){this.show=!0},revisePassword:function(e){var s=this;s.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;s.loading=!0,s.$axios({method:"post",url:window.$g_Api+"/oa/manage/change_password",data:{token:s.token,uid:s.uid,password:s.ruleForm.checkPass}}).then(function(e){s.loading=!1,s.$message.success(e.data.message),setTimeout(function(){s.show=!1},1e3)}).catch(function(e){})})}}},o={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"my_wap",attrs:{id:"usercenter"}},[a("div",{staticClass:"formBox"},[a("div",{staticClass:"headpic"},[a("img",{attrs:{src:"static/img/img.jpg",alt:""}}),e._v(" "),a("div",{staticClass:"textinfo"},[a("p",{staticClass:"p1"},[e._v(e._s(e.formLabel.name))]),e._v(" "),a("p",{staticClass:"p2"},[e._v(e._s(e.formLabel.username))])])]),e._v(" "),a("div",{staticClass:"p3"},[a("p",[a("span",[e._v("类型: ")]),a("span",[e._v(e._s(e.formLabel.group))])])]),e._v(" "),a("div",{staticClass:"p3"},[a("p",[a("span",[e._v("姓名: ")]),a("span",[e._v(e._s(e.formLabel.name))])])]),e._v(" "),a("div",{staticClass:"p3"},[a("p",[a("span",[e._v("用户名:")]),e._v(" "),a("span",[e._v(e._s(e.formLabel.username))])])]),e._v(" "),a("div",{staticClass:"p3"},[a("p",[a("span",[e._v("密码: ")]),a("span",[e._v(e._s(e.formLabel.password))])]),a("i",{on:{click:e.showBox}},[e._v("修改")])])]),e._v(" "),a("el-dialog",{staticClass:"reviseInfo",attrs:{title:"修改密码",visible:e.show,width:"550px"},on:{"update:visible":function(s){e.show=s}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"info"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-position":"left","label-width":"90px",model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formLabel.name,callback:function(s){e.$set(e.formLabel,"name",s)},expression:"formLabel.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formLabel.username,callback:function(s){e.$set(e.formLabel,"username",s)},expression:"formLabel.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[a("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.pass,callback:function(s){e.$set(e.ruleForm,"pass",s)},expression:"ruleForm.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认新密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.checkPass,callback:function(s){e.$set(e.ruleForm,"checkPass",s)},expression:"ruleForm.checkPass"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(s){e.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(s){e.revisePassword("ruleForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(t,o,!1,function(e){a("IXwn")},null,null);s.default=r.exports}});