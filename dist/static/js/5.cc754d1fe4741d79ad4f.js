webpackJsonp([5],{"k+Hx":function(e,t){},vQug:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),o={name:"today",data:function(){return{devData:{},tableData:[],reqData:{token:sessionStorage.getItem("token"),uid:sessionStorage.getItem("uid")},money:null,reviseData:{},reviseBox:!1,loading:!1,deviceNb:""}},props:["myheight"],computed:{nowDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate();e.getHours(),e.getMinutes(),e.getSeconds();return t+"-"+a+"-"+s},tableHeight:function(){return this.$props.myheight-230}},filters:{getStatus:function(e){var t=void 0;switch(e){case 0:t="未转账";break;case 1:t="转账成功";break;case 2:t="转账失败";break;case 3:t="转账失败后再次转账成功"}return t}},mounted:function(){this.getTranrecord()},methods:{getTranrecord:function(){var e=this;this.$ajax("/oa/tranrecord",this.reqData).then(function(t){0==t.code?(e.devData=t.data[0],e.tableData=t.data1):e.$message.error(t.message)})},machines:function(){var e=this;this.loading=!0,this.$ajax("/oa/exec_each_machines",this.reqData,"post","application/json;charset=UTF-8").then(function(t){e.loading=!1,0==t.code?(e.$message.success(t.message),e.getTranrecord()):e.$message.error(t.message)}).catch(function(t){e.loading=!1,e.$message.error("请求失败,请重试 "+t)})},checkInfo:function(){var e=this;this.loading=!0,this.$ajax("/oa/hedui",n()({},this.reqData)).then(function(t){e.loading=!1,0==t.code?e.getTranrecord():e.$message.error(t.message)}).catch(function(t){e.loading=!1})},getMoney:function(){var e=this;this.$confirm("是否确定提交转账?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(!(e.devData.cash_monery<=e.devData.balance))return e.$message.error("余额不足,请充值"),!1;e.loading=!0,e.$ajax("/oa/money",e.reqData).then(function(t){e.loading=!1,0==t.code?(e.$message.success(t.message),e.getTranrecord()):e.$message.error(t.message)}).catch(function(t){e.loading=!1,e.$message.error(t)})}).catch(function(e){})},deposit:function(){var e=this;this.$ajax("/oa/balance_deposit",n()({},this.reqData,{deposit:this.money}),"post","application/json;charset=UTF-8").then(function(t){0==t.code?(e.$message.success(t.message),e.getTranrecord()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})},revise:function(){var e=this,t=n()({},this.reqData,this.reviseData);this.$ajax("/oa/uptranrecord",t).then(function(t){0==t.code?(e.$message.success(t.message),e.closeBox(),e.getTranrecord()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})},handleEdit:function(e){this.reviseBox=!0,this.reviseData={monery:e.monery,name:e.name,zfb:e.zfb,id:e.id}},closeBox:function(){this.reviseBox=!1,this.reviseData={}},mouseOver:function(){var e=this,t=n()({},this.reqData);this.$ajax("/oa/undevice",t).then(function(t){0==t.code&&(e.deviceNb=t.data.join(","))}).catch(function(t){e.$message.error(t)})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"today"}},[a("div",{staticClass:"today_top"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.machines}},[e._v("申请提现")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkInfo}},[e._v("核对信息")]),e._v(" "),a("span",[e._v("当前日期 : "+e._s(e.nowDate))])],1),e._v(" "),a("div",{staticClass:"today_head"},[a("div",{staticClass:"head_l"},[a("p",[e._v("总设备数量 : "),a("span",[e._v(e._s(e.devData.device_count))])]),e._v(" "),a("p",[e._v("提现设备数量 : "),a("span",[e._v(e._s(e.devData.cash_device_count))])]),e._v(" "),a("p",[e._v("未提现设备数量 : "),a("el-tooltip",{attrs:{"popper-class":"toolTipClass",content:e.deviceNb,placement:"bottom",effect:"light"}},[a("span",{on:{mouseover:e.mouseOver}},[e._v(e._s(e.devData.un_device))])])],1),e._v(" "),a("p",[e._v("提现笔数 : "),a("span",[e._v(e._s(e.devData.cash_count))])]),e._v(" "),a("p",[e._v("金额 : "),a("span",[e._v(e._s(e.devData.cash_monery))])]),e._v(" "),a("p",[e._v("账户余额 : "),a("span",[e._v(e._s(e.devData.balance))])]),e._v(" "),a("div",{staticClass:"deposit"},[a("el-input",{staticStyle:{width:"160px",margin:"0 20px 0 60px"},attrs:{placeholder:"填写余额"},model:{value:e.money,callback:function(t){e.money=t},expression:"money"}}),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.deposit}},[e._v("存入余额")])],1)])]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,stripe:"","max-height":e.tableHeight}},[a("el-table-column",{attrs:{width:"90",type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{width:"90",prop:"monery",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{width:"90",prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"zfb",label:"zfb账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device",width:"60",label:"设备号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pay_time",label:"转账时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"order_id",label:"订单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remake",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"out_biz_no",label:"商户单号"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("getStatus")(t.row.status)))])]}}])})],1),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-top":"10px","margin-right":"10px"},attrs:{type:"primary",plain:""},on:{click:e.getMoney}},[e._v("提交转账")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.reviseBox,expression:"reviseBox"}],staticClass:"model_box"},[a("div",{staticClass:"main_box"},[a("el-form",{staticClass:"formClass",attrs:{"label-width":"80px",model:e.reviseData}},[a("el-form-item",{attrs:{label:"金额"}},[a("el-input",{model:{value:e.reviseData.monery,callback:function(t){e.$set(e.reviseData,"monery",t)},expression:"reviseData.monery"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.reviseData.name,callback:function(t){e.$set(e.reviseData,"name",t)},expression:"reviseData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"zfb账号"}},[a("el-input",{model:{value:e.reviseData.zfb,callback:function(t){e.$set(e.reviseData,"zfb",t)},expression:"reviseData.zfb"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return t.stopPropagation(),e.revise(t)}}},[e._v("保存修改")])],1)],1),e._v(" "),a("i",{staticClass:"el-icon-circle-close",on:{click:e.closeBox}})],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(o,i,!1,function(e){a("k+Hx")},"data-v-da4aa484",null);t.default=r.exports}});