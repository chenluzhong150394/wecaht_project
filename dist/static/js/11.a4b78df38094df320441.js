webpackJsonp([11],{GF4k:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{loading:!1,ruleForm:{username:"",password:""},checked:!1}},computed:{},mounted:function(){this.getCookie(),this.getH()},methods:{getH:function(){var e=void 0;window.innerWidth?e=window.innerHeight:document.body&&document.body.clientHeight&&(e=document.body.clientHeight),sessionStorage.setItem("myheight",e)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loading=!0;var r={username:t.ruleForm.username,password:t.ruleForm.password};t.$ajax("/oa/login",r).then(function(e){0==e.code?(sessionStorage.setItem("uid",e.data.uid),sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("role",e.data.role),t.$router.push("/home")):(t.loading=!1,t.$message.error(e.message))}).catch(function(e){t.loading=!1,t.$message.error(e)})})},rememberMe:function(e){e?this.setCookie(this.ruleForm.username,this.ruleForm.password,7):this.clearCookie()},setCookie:function(e,t,r){var o=new Date;o.setTime(o.getTime()+864e5*r),document.cookie="userName="+e+";path=/;expires="+o.toLocaleString(),document.cookie="userPwd="+t+";path=/;expires="+o.toLocaleString()},getCookie:function(){if(document.cookie.length>0){for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var r=e[t].split("=");"userName"==r[0]?(this.ruleForm.username=r[1],console.log(this.ruleForm.username)):"userPwd"==r[0]&&(this.ruleForm.password=r[1])}this.ruleForm.username&&this.ruleForm.password?this.checked=!0:this.checked=!1}},clearCookie:function(){this.setCookie("","",-1)}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-wrap"},[r("div",{staticClass:"bgc_img"}),e._v(" "),r("div",{staticClass:"blkllogo"}),e._v(" "),r("div",{staticClass:"login_wrap_w"},[e._m(0),e._v(" "),e._m(1),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ms-login"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},"label-width":"0px"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),r("div",{staticClass:"checkBox"},[r("el-checkbox",{on:{change:e.rememberMe},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")])],1),e._v(" "),r("div",{staticClass:"login-btn"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"log_logo"},[t("img",{attrs:{src:r("ZYPB"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ms-title"},[t("h1",[this._v("铁牛提现系统")])])}]};var i=r("VU/8")(o,s,!1,function(e){r("PTvg")},null,null);t.default=i.exports},PTvg:function(e,t){}});