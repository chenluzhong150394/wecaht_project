webpackJsonp([10],{"8hmt":function(e,t){},i2eM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dd8w"),o=r.n(a),i={name:"deviceInfo",data:function(){return{tableData:[],reqData:{token:sessionStorage.getItem("token"),uid:sessionStorage.getItem("uid")},myForm:{server:"",device:"",software_account:"",wechat_id:"",remark:""},reviseBox:!1,rules:{server:[{required:!0,message:"请填写服务器Ip",trigger:"blur"}],device:[{required:!0,message:"请填写设备号",trigger:"blur"}],software_account:[{required:!0,message:"请填写软件账号",trigger:"blur"}],wechat_id:[{required:!0,message:"请填写微信号",trigger:"blur"}]}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;this.$ajax("/oa/devicestatus",o()({},this.reqData)).then(function(t){0==t.code?e.tableData=t.data:e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var r=o()({},t.myForm,t.reqData);r.type=r.hasOwnProperty("id")?"updata":"",t.$ajax("/oa/writedevice",r).then(function(e){0==e.code?(t.$message.success(e.message),t.reviseBox=!1,t.getData()):t.$message.error(e.message)}).catch(function(e){t.$message.error(e)})})},handleDelete:function(e){var t=this;this.$confirm("即将删除该设备号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax("/oa/deldevice",o()({},t.reqData,{id:e.id})).then(function(e){0==e.code?(t.$message.success(e.message),t.reviseBox=!1,t.getData()):t.$message.error(e.message)}).catch(function(e){t.$message.error(e)})}).catch(function(){return!1})},addBtn:function(){this.myForm={server:"",device:"",software_account:"",wechat_id:"",remark:""},this.reviseBox=!0},handleEdit:function(e){this.reviseBox=!0,this.myForm=o()({},e)},closeBox:function(){this.reviseBox=!1,this.myForm={}}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"deviceInfo"}},[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addBtn}},[e._v("新增设备")]),e._v(" "),r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,stripe:""}},[r("el-table-column",{attrs:{width:"50",prop:"id",label:"id"}}),e._v(" "),r("el-table-column",{attrs:{width:"130",prop:"server",label:"服务器IP"}}),e._v(" "),r("el-table-column",{attrs:{width:"70",prop:"device",label:"设备号"}}),e._v(" "),r("el-table-column",{attrs:{width:"150",prop:"software_account",label:"软件账号"}}),e._v(" "),r("el-table-column",{attrs:{width:"150",prop:"wechat_id",label:"微信号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),r("el-table-column",{staticStyle:{width:"100%"},attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("修改")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.reviseBox,expression:"reviseBox"}],staticClass:"model_box"},[r("div",{staticClass:"main_box"},[r("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.myForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"服务器IP",prop:"server"}},[r("el-input",{model:{value:e.myForm.server,callback:function(t){e.$set(e.myForm,"server",t)},expression:"myForm.server"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"设备号",prop:"device"}},[r("el-input",{model:{value:e.myForm.device,callback:function(t){e.$set(e.myForm,"device",t)},expression:"myForm.device"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"软件账号",prop:"software_account"}},[r("el-input",{model:{value:e.myForm.software_account,callback:function(t){e.$set(e.myForm,"software_account",t)},expression:"myForm.software_account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"微信号",prop:"wechat_id"}},[r("el-input",{model:{value:e.myForm.wechat_id,callback:function(t){e.$set(e.myForm,"wechat_id",t)},expression:"myForm.wechat_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.myForm.remark,callback:function(t){e.$set(e.myForm,"remark",t)},expression:"myForm.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确认提交")])],1)],1),e._v(" "),r("i",{staticClass:"el-icon-circle-close",on:{click:e.closeBox}})],1)])],1)},staticRenderFns:[]};var n=r("VU/8")(i,s,!1,function(e){r("8hmt")},"data-v-112e0f73",null);t.default=n.exports}});